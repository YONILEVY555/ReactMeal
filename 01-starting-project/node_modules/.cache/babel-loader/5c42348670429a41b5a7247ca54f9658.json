{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yonil\\\\Desktop\\\\reactProject\\\\01-starting-project\\\\src\\\\store\\\\CartProvider.js\",\n    _s = $RefreshSig$();\n\nimport CartContext from \"./CartContext\";\nimport { findIdexInArrayObject } from '../helpers/ArrayHelpers';\nimport react, { useReducer } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dummy = {\n  totalPrice: 120,\n  items: [{\n    id: 'Sushi',\n    amount: 3,\n    price: 40\n  }],\n  totalAmount: 3\n};\n\nconst cartReducer = (prevState, action) => {\n  if (action.type == 'ADD_ITEM') return addItem(prevState.items, action.item, prevState.totalPrice);\n  if (action.type == 'SUB_ITEM') return subItem(prevState.items, action.item, prevState.totalPrice);\n};\n\nconst addItem = (items, item, totalPrice) => {\n  const indexItem = findIdexInArrayObject(items, item);\n  let updatedItems = [...items];\n\n  if (isItemExists(indexItem)) {\n    updatedItems[indexItem].amount += item.amount;\n  } else {\n    updatedItems = [...updatedItems, item];\n  }\n\n  const updatedTotalPrice = totalPrice + item.amount * item.price;\n  const countItem = updatedItems.reduce((count, current) => count + current.amount, 0);\n  return {\n    items: updatedItems,\n    totalPrice: updatedTotalPrice,\n    totalAmount: countItem\n  };\n};\n\nconst subItem = (items, item, totalPrice) => {\n  const indexItem = findIdexInArrayObject(items, item);\n  let updatedItems = [...items];\n\n  if (islessOneLeft(items, item, indexItem)) {\n    updatedItems = updatedItems.filter(i => i.id != item.id);\n  } else {\n    updatedItems[indexItem].amount -= item.amount;\n  }\n\n  const updatedTotalPrice = totalPrice - item.amount * item.price;\n  const countItem = updatedItems.reduce((count, current) => count + current.amount, 0);\n  return {\n    items: updatedItems,\n    totalPrice: updatedTotalPrice,\n    totalAmount: countItem\n  };\n};\n\nconst isItemExists = indexItem => {\n  if (indexItem === -1) {\n    return false;\n  }\n\n  return true;\n};\n\nconst islessOneLeft = (items, item, indexItem) => {\n  const updatedAmount = items[indexItem].amount - item.amount;\n\n  if (updatedAmount < 1) {\n    return true;\n  }\n\n  return false;\n};\n\nconst CartProvider = props => {\n  _s();\n\n  const [cartState, dispatchCartAct] = useReducer(cartReducer, dummy);\n\n  const addItemHandler = item => {\n    const action = {\n      type: 'ADD_ITEM',\n      item: item\n    };\n    dispatchCartAct(action);\n  };\n\n  const subItemHandler = item => {\n    const action = {\n      type: 'SUB_ITEM',\n      item: item\n    };\n    dispatchCartAct(action);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items: cartState.items,\n      totalPrice: cartState.totalPrice,\n      addItemHandler: addItemHandler,\n      subItemHandler: subItemHandler\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 12\n  }, this);\n};\n\n_s(CartProvider, \"X9SX+dPINntZEhYlLLuKfBJNoUs=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["CartContext","findIdexInArrayObject","react","useReducer","dummy","totalPrice","items","id","amount","price","totalAmount","cartReducer","prevState","action","type","addItem","item","subItem","indexItem","updatedItems","isItemExists","updatedTotalPrice","countItem","reduce","count","current","islessOneLeft","filter","i","updatedAmount","CartProvider","props","cartState","dispatchCartAct","addItemHandler","subItemHandler","children"],"sources":["C:/Users/yonil/Desktop/reactProject/01-starting-project/src/store/CartProvider.js"],"sourcesContent":["\r\n\r\nimport CartContext from \"./CartContext\"\r\nimport {findIdexInArrayObject} from '../helpers/ArrayHelpers'\r\nimport react,{useReducer} from 'react'\r\n\r\nconst dummy = {     \r\n\r\n    totalPrice: 120,\r\n\r\n    items: [{\r\n        id: 'Sushi',\r\n        amount: 3,\r\n        price: 40,\r\n    }],\r\n\r\n    totalAmount: 3\r\n\r\n    }\r\n    \r\n    const cartReducer = (prevState, action) =>{\r\n    \r\n    if(action.type=='ADD_ITEM')\r\n      return addItem(prevState.items,action.item,prevState.totalPrice)\r\n    \r\n    if(action.type=='SUB_ITEM')\r\n      return subItem(prevState.items,action.item,prevState.totalPrice)  \r\n    \r\n    }\r\n    \r\n    const addItem = (items,item,totalPrice) =>{\r\n    \r\n    const indexItem = findIdexInArrayObject(items,item)\r\n    \r\n    let updatedItems = [...items]; \r\n    \r\n    if(isItemExists(indexItem)){\r\n        updatedItems[indexItem].amount += item.amount;\r\n    }else{\r\n        updatedItems = [...updatedItems,item]\r\n    }\r\n    \r\n    const updatedTotalPrice = totalPrice + (item.amount*item.price)\r\n    \r\n    const countItem = updatedItems.reduce( (count, current) =>  count + current.amount , 0)\r\n\r\n    return { items: updatedItems, totalPrice: updatedTotalPrice, totalAmount: countItem  };\r\n    \r\n    }\r\n    \r\n    const subItem = (items,item,totalPrice) =>{\r\n    \r\n    \r\n    const indexItem = findIdexInArrayObject(items,item)\r\n    \r\n    let updatedItems = [...items]; \r\n    \r\n    if(islessOneLeft(items,item,indexItem)){\r\n        updatedItems = updatedItems.filter(i => i.id != item.id) ;\r\n    }else{\r\n        updatedItems[indexItem].amount -= item.amount; \r\n    }\r\n    \r\n    const updatedTotalPrice = totalPrice - (item.amount*item.price) \r\n\r\n    const countItem = updatedItems.reduce( (count, current) =>  count + current.amount , 0)\r\n    \r\n    return { items: updatedItems, totalPrice: updatedTotalPrice, totalAmount: countItem };\r\n    \r\n    }\r\n    \r\n    const isItemExists = (indexItem) =>{\r\n    \r\n    if ( indexItem === -1){\r\n      return false\r\n    }\r\n    \r\n    return true;\r\n    \r\n    }\r\n    \r\n    const islessOneLeft = (items,item,indexItem) =>{\r\n    \r\n    const updatedAmount = items[indexItem].amount - item.amount; \r\n    \r\n    if ( updatedAmount < 1 ){\r\n        return true\r\n      }\r\n  \r\n      return false;\r\n  \r\n    }\r\n\r\n\r\nconst CartProvider = (props) =>{\r\n\r\n    const [cartState, dispatchCartAct] = useReducer(cartReducer,dummy);\r\n\r\n    const addItemHandler = (item)=>{\r\n\r\n\r\n        const action = {type: 'ADD_ITEM',\r\n                        item: item\r\n                       }\r\n\r\n        dispatchCartAct(action)\r\n    }\r\n\r\n    const subItemHandler = (item) => {\r\n\r\n        const action = {type: 'SUB_ITEM',\r\n                        item: item\r\n                       }\r\n\r\n        dispatchCartAct(action)\r\n\r\n    }\r\n\r\n    return <CartContext.Provider value={{items: cartState.items,\r\n                                        totalPrice: cartState.totalPrice,\r\n                                        addItemHandler: addItemHandler,\r\n                                        subItemHandler: subItemHandler   }}>\r\n\r\n                {props.children}       \r\n\r\n           </CartContext.Provider>\r\n\r\n}\r\n\r\nexport default CartProvider"],"mappings":"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"},"metadata":{},"sourceType":"module"}